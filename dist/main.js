!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=2)}([function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0),i(1);function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.srcX=0,this.srcY=0,this.sheetWidth=256,this.sheetHeight=256,this.row=4,this.col=4,this.sheetX=this.sheetWidth/this.row,this.sheetY=this.sheetHeight/this.row,this.currentFrame=0,this.width=50,this.height=50,this.maxSpeed=1,this.speed=0,this.position={x:0,y:this.gameHeight-this.height},this.cannonAngle=Math.PI/4,this.cannonAngleSpeed=Math.PI/60,this.cannonSpeed=0,this.cannonLength=this.width*Math.sqrt(2),this.gauge=Math.PI,this.gaugeSpeed=Math.PI/30,this.gaugeBarRaidus=30,this.missileX=this.position.x+this.width/2+this.cannonLength*Math.cos(this.cannonAngle),this.missileY=this.position.y+this.height/2-this.cannonLength*Math.sin(this.cannonAngle),this.missileRadius=10,this.missileDx=this.gauge*Math.cos(this.cannonAngle),this.missileDy=this.gauge*Math.sin(this.cannonAngle),this.gravity=.0981,this.charging=!1,this.fire=!1,this.hit=!1,this.ground=!0,this.game=e,this.image1=document.getElementById("tank"),this.image2=document.getElementById("missile"),this.jumpcount=0,this.jumpmax=1,this.reset()}var e,i,n;return e=t,(i=[{key:"draw",value:function(t){t.drawImage(this.image1,this.srcX*this.sheetWidth/4,this.srcY*this.sheetHeight/4,this.sheetWidth/4,this.sheetHeight/4,this.position.x-5,this.position.y-15,this.sheetWidth/4,this.sheetHeight/4),t.beginPath(),t.moveTo(this.position.x+this.width/2,this.position.y+this.height/2),t.lineTo(this.position.x+this.width/2+this.cannonLength*Math.cos(this.cannonAngle),this.position.y+this.height/2-this.cannonLength*Math.sin(this.cannonAngle)),t.strokeStyle="rgb(255, 127, 80)",t.lineWidth=2,t.stroke(),t.closePath()}},{key:"drawGuage",value:function(t){t.beginPath(),t.strokeStyle="#e85450",t.arc(this.position.x+this.width/2,this.position.y-this.height/2,this.gaugeBarRaidus,Math.PI,this.gauge,!1),t.lineWidth=10,t.stroke(),t.closePath()}},{key:"drawMissile",value:function(t){this.fire?(this.missileDy-=this.gravity,this.missileX+=this.missileDx,this.missileY-=this.missileDy):(this.missileX=this.position.x+this.width/2+this.cannonLength*Math.cos(this.cannonAngle),this.missileY=this.position.y+this.height/2-this.cannonLength*Math.sin(this.cannonAngle)),t.beginPath(),t.drawImage(this.image2,this.missileX-17,this.missileY-17,30,30),t.closePath()}},{key:"moveLeft",value:function(){this.speed=-this.maxSpeed,this.srcX>2&&(this.srcX=0)}},{key:"moveRight",value:function(){this.speed=this.maxSpeed,this.srcX>2&&(this.srcX=0)}},{key:"stop",value:function(){this.speed=0}},{key:"moveUp",value:function(){this.cannonAngle+=this.cannonAngleSpeed,this.srcX>2&&(this.srcX=0)}},{key:"moveDown",value:function(){this.cannonAngle+=-this.cannonAngleSpeed,this.srcX>2&&(this.srcX=0)}},{key:"stopcannonAngle",value:function(){this.cannonSpeed=0}},{key:"stopSpacebar",value:function(){this.gauge=0}},{key:"reset",value:function(){this.position={x:0,y:this.gameHeight-this.height}}},{key:"update",value:function(t){t&&(this.position.x+=this.speed,this.position.x<0&&(this.position.x=0),this.position.x+this.width>this.gameWidth/2-2*this.width&&(this.position.x=this.gameWidth/2-3*this.width),this.position.y+this.height/2==this.position.y+this.height/2&&(this.position.y=this.gameHeight-this.height),this.gauge>2*Math.PI&&(this.gauge=2*Math.PI),(this.missileX-this.missileRadius<-2*this.width||this.missileX+this.missileRadius>this.gameWidth||this.missileY<0||this.missileY+this.missileRadius>this.gameHeight+2*this.height)&&(this.fire=!1,this.game.attempts++,this.game.attemptsCount.innerText="Attempts: ".concat(this.game.attempts)),this.missileX>=this.game.target.targetX&&this.missileX<=this.game.target.targetX+this.game.target.targetWidth&&this.missileY>=this.game.target.targetY&&this.missileY<=this.gameHeight&&(this.hit=!0,this.missileX=-this.missileX,this.missileY=-this.missileY))}}])&&s(e.prototype,i),n&&s(e,n),t}();var a=function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),document.addEventListener("keydown",(function(t){switch(t.keyCode){case 37:e.moveLeft(),e.srcY=1,e.srcX+=1;break;case 39:e.moveRight(),e.srcY=2,e.srcX+=1;break;case 38:e.moveUp(),e.srcY=0,e.srcX+=1;break;case 40:e.moveDown(),e.srcY=0,e.srcX+=1;break;case 32:if(e.srcY=0,e.srcX=0,e.fire)return;e.charging=!0,e.gauge+=e.gaugeSpeed,e.missileDx=1.5*e.gauge*Math.cos(e.cannonAngle),e.missileDy=1.5*e.gauge*Math.sin(e.cannonAngle);break;case 13:i.start();break;case 77:document.getElementById("audio").pause()}})),document.addEventListener("keyup",(function(t){switch(t.keyCode){case 37:e.speed<0&&e.stop();break;case 39:e.speed>0&&e.stop();break;case 38:e.cannonAngle>=0&&e.stopcannonAngle();break;case 40:e.cannonAngle<=Math.PI&&e.stopcannonAngle();break;case 32:e.charging=!1,e.fire=!0,e.gauge=Math.PI}}))};function h(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targetWidth=Math.floor(50*Math.random()+100),this.targetHeight=Math.floor(50*Math.random()+100),this.targetX=Math.floor(Math.random()*(300-this.targetWidth)+500),this.targetY=e.gameHeight-this.targetHeight,this.image4=document.getElementById("target")}var e,i,s;return e=t,(i=[{key:"update",value:function(){}},{key:"draw",value:function(t){t.drawImage(this.image4,this.targetX,this.targetY,this.targetWidth,this.targetHeight)}}])&&h(e.prototype,i),s&&h(e,s),t}();function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var c=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.position=i,this.width=50,this.height=50,this.markedForDeletion=!1,this.image3=document.getElementById("wall")}var e,i,s;return e=t,(i=[{key:"update",value:function(){var t=this.game.tank.missileY+this.game.tank.missileRadius,e=this.game.tank.missileY,i=this.position.y,s=this.position.x,n=this.position.x+this.width,a=this.position.y+this.height;t>=i&&e<=a&&this.game.tank.missileX>=s&&this.game.tank.missileX+this.game.tank.missileRadius<=n&&(this.game.tank.missileX=-this.game.tank.missileX,this.game.tank.missileX=-this.game.tank.missileY,this.markedForDeletion=!0)}},{key:"draw",value:function(t){t.drawImage(this.image3,this.position.x,this.position.y,this.width,this.height)}}])&&o(e.prototype,i),s&&o(e,s),t}();function g(t,e){var i=[];return e.forEach((function(e,s){e.forEach((function(e,n){if(1===e){var a={x:450-50*s,y:550-50*n};i.push(new c(t,a))}}))})),i}var l=[[1]],u=[[0,0,0,0,0,0,0,1,0],[1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,0]],m=[[1,1,1,1,1,1,1,1,0],[0,0,0,0,1,0,0,0,0],[1,1,1,1,1,1,1,1,0]],d=[[1,1,1,1,1,1,1,0,0],[0,0,0,1,0,0,0,1,0],[1,1,1,1,1,1,1,0,0]],f=[[1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,1,0,0],[1,1,1,1,1,1,1,1,0]],p=[[1,1,1,1,0,1,1,0,0],[0,0,0,0,1,0,0,0,0],[1,1,1,1,1,1,1,1,0]],y=[[0,1,1,0,1,0,0,0,1],[1,0,0,1,0,1,1,1,0],[0,1,1,0,1,0,0,0,1]],w=[[1,0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1,0],[1,0,1,0,1,0,1,0,1]],v=[[1,0,1,0,1,1,0,0,0],[1,1,1,0,1,1,1,1,0],[1,0,1,1,0,1,0,0,0]],k=[[1,1,1,1,1,1,0,0,0],[1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,0,0,0]],b=[[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]];function x(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function A(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var I=1,E=2,X=3,M=4,P=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameHeight=i,this.gameWidth=e,this.gamestate=E,this.ctx=s,this.tank=new n(this),this.target=new r(this),this.gameObjects=[],this.walls=[],this.attempts=0,this.attemptsCount=document.getElementById("attempts"),this.maxAttempts=10,this.stages=[l,u,m,d,f,p,y,w,v,k,b],this.currentStage=0,this.currentStageCount=document.getElementById("stage"),new a(this.tank,this),this.image5=document.getElementById("start"),this.image6=document.getElementById("gameover"),this.image7=document.getElementById("newstage")}var e,i,s;return e=t,(i=[{key:"start",value:function(){this.gamestate!==E&&this.gamestate!==M||(this.target=new r(this),this.currentStage>=11&&(this.currentStage=0),this.walls=g(this,this.stages[this.currentStage]),this.gameObjects=[this.tank,this.target],this.attempts=0,this.tank.reset(),document.getElementById("audio").play(),this.gamestate=I)}},{key:"restart",value:function(){this.gamestate=M,this.tank=new n(this),this.target=new r(this),this.walls=g(this,this.stages[0]),this.gameObjects=[this.tank,this.target],new a(this.tank,this),this.attempts=0,this.currentStage=0}},{key:"update",value:function(t){this.attempts===this.maxAttempts&&(this.gamestate=X),this.gamestate!==E&&this.gamestate!==X&&(!0===this.tank.hit&&(this.tank.hit=!1,this.currentStage++,this.currentStageCount.innerText="Stage: ".concat(this.currentStage),this.gamestate=M,this.start()),[].concat(x(this.gameObjects),x(this.walls)).forEach((function(e){return e.update(t)})),this.walls=this.walls.filter((function(t){return!t.markedForDeletion})))}},{key:"draw",value:function(t){this.tank.draw(t),this.tank.drawGuage(t),this.tank.drawMissile(t),[].concat(x(this.gameObjects),x(this.walls)).forEach((function(e){return e.draw(t)})),this.gamestate===E&&(t.drawImage(this.image5,0,0,this.gameWidth,this.gameHeight),t.fill(),t.font="30px serif",t.fillStyle="white",t.textAlign="center",t.fillText("Press Enter to start",this.gameWidth/2,this.gameHeight/2)),this.gamestate===X&&(t.drawImage(this.image6,0,0,this.gameWidth,this.gameHeight),t.fillStyle="rgba(0,0,0,1)",t.fill(),t.font="30px serif",t.fillStyle="white",t.textAlign="center",t.fillText("GAME OVER",this.gameWidth/2,this.gameHeight/2)),this.gamestate===M&&(t.drawImage(this.image7,0,0,this.gameWidth,this.gameHeight),t.fillStyle="rgba(0,0,0,1)",t.fill(),t.font="30px serif",t.fillStyle="white",t.textAlign="center",t.fillText("Press Enter to Re-start",this.gameWidth/2,this.gameHeight/2))}}])&&A(e.prototype,i),s&&A(e,s),t}();window.open("https://nhsb00.github.io/catch-a-charmander/","width=954","height=878");var Y=document.getElementById("gameBoard").getContext("2d"),H=new P(800,600,Y);document.getElementById("restart").addEventListener("click",(function(t){H.restart()}));var W=document.getElementById("instruction"),j=document.getElementById("modal");W.addEventListener("click",(function(t){j.style.display="block"})),j.addEventListener("click",(function(t){j.style.display="none"}));var B=0;requestAnimationFrame((function t(e){var i=e-B;B=e,document.getElementById("audio").volume=.3,Y.clearRect(0,0,800,600),H.update(i),H.draw(Y),requestAnimationFrame(t)}));var O=0;setInterval((function(){0===O?(document.querySelector("h1").style.color="#939597",O++):1===O?(document.querySelector("h1").style.color="#e85450",O++):2===O?(document.querySelector("h1").style.color="#a2c49b",O++):3===O?(document.querySelector("h1").style.color="#f5df4d",O++):(document.querySelector("h1").style.color="#7bc4c4",O=0)}),1e3)}]);
//# sourceMappingURL=main.js.map